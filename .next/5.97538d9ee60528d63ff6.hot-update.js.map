{"version":3,"file":"5.97538d9ee60528d63ff6.hot-update.js","sources":["webpack:///components/Contact/index.js"],"sourcesContent":["import React from 'react';\nimport { Card, CardActions, CardHeader } from 'material-ui/Card';\nimport RaisedButton from 'material-ui/RaisedButton';\n\nimport { graphql } from 'react-apollo';\nimport gql from 'graphql-tag';\n\nimport Button from '../shared/Button';\nimport { contactType } from '../../propTypes/Contact';\n\nimport withMaterialUI from '../../lib/withMUI';\nimport { styles } from './styles.css';\n\nconst placeholders = [\n  'https://semantic-ui.com/images/avatar2/large/elyse.png',\n  'https://semantic-ui.com/images/avatar2/large/matthew.png',\n  'https://semantic-ui.com/images/avatar2/large/kristy.png',\n];\n\nconst Contact = ({\n  firstName,\n  lastName,\n  phoneNumbers,\n  id,\n  viewPage,\n  deleteContact,\n  isLoading,\n}) => (\n  <Card style={styles.card}>\n    <CardHeader\n      title={isLoading && `${firstName} ${lastName}`}\n      subtitle={!isLoading && phoneNumbers.map(p => <div>{p.number} / {p.label}</div>)}\n      avatar={placeholders[Math.floor(Math.random() * placeholders.length)]} // for presentational purposes\n    />\n    <CardActions style={styles.actions}>\n      {!viewPage && <Button\n        link={`/view?id=${id}`}\n        as={`/view/${id}`}\n        label=\"View\"\n      />}\n      <Button\n        link={`/edit?id=${id}`}\n        as={`/edit/${id}`}\n        label=\"Edit\"\n      />\n      <RaisedButton\n        label=\"Delete\"\n        primary\n        onClick={() => deleteContact(id)}\n      />\n    </CardActions>\n  </Card>\n);\n\nContact.propTypes = { ...contactType };\n\nconst deleteContact = gql`\n  mutation deleteContact($id: ID!) {\n    deleteContact(id: $id) {\n      id\n    }\n  }\n`;\n\nconst withQuery = graphql(deleteContact, {\n  props: ({ mutate }) => ({\n    deleteContact: id => mutate({\n      variables: { id },\n      updateQueries: {\n        allContacts: (previousResult, { mutationResult }) => {\n          const deletedContact = mutationResult.data.deleteContact;\n          const { allContacts } = previousResult;\n          const deletedIndex = previousResult.allContacts\n            .findIndex(p => p.id === deletedContact.id);\n\n          const newAllContact = [\n            ...allContacts.slice(0, deletedIndex),\n            ...allContacts.slice(deletedIndex + 1, allContacts.length),\n          ];\n\n          return {\n            ...previousResult,\n            allContacts: newAllContact,\n          };\n        },\n      },\n    }),\n  }),\n});\n\nexport default withQuery(withMaterialUI(Contact));\n\n\n\n// WEBPACK FOOTER //\n// components/Contact/index.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AAAA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AA1BA;AACA;AAkCA;AAEA;AAQA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AADA;AAGA;AACA;AAAA;AACA;AACA;AACA;AAIA;AAEA;AAFA;AAIA;AAhBA;AAFA;AAAA;AADA;AAAA;AADA;AACA;AAyBA;AACA;AADA;;;;;;;;;;;;AA7EA;AAMA;AAqCA;AAQA;;;;;;;;;;A","sourceRoot":""}